# Activer les réécritures d'URL
RewriteEngine On

# Passer le header Authorization à PHP (supprimé par défaut par Apache CGI/FastCGI)
SetEnvIf Authorization "(.*)" HTTP_AUTHORIZATION=$1

# Headers CORS
<IfModule mod_headers.c>
    Header always set Access-Control-Allow-Origin "*"
    Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
    Header always set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With, X-CSRF-Token"
</IfModule>

# Gérer les requêtes OPTIONS
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ index.php [QSA,L]

# Interdire l'accès direct aux fichiers de configuration
<Files "config/*">
    Require all denied
</Files>

# Interdire l'accès aux fichiers .env
<Files ".env">
    Require all denied
</Files>

# Désactiver l'affichage des répertoires
Options -Indexes