<!-- Version Mobile (incluant tablettes et iPad Pro) -->
<div class="header-container menu-header d-block d-xl-none">
    <div class="d-flex justify-content-between align-items-center w-100">
        <!-- Logo Mobile -->
        <div class="ms-2">
            <a href="/" class="logo-link">
                <img src="mini_logo_header.png" alt="Logo Vite & Gourmand" class="rounded-3 logo-img">
            </a>
        </div>
        
        <!-- Menu hamburger pour mobile/tablette -->
        <div class="me-2">
            <button class="mobile-menu-toggle" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileMenu" aria-controls="mobileMenu">
                <i class="bi bi-list"></i>
            </button>
        </div>
    </div>
</div>

<!-- Version Desktop -->
<div class="header-container menu-header d-none d-xl-block">
    <div class="d-flex justify-content-between align-items-center w-100">
        <!-- Logo Desktop -->
        <div class="ms-4">
            <a href="/" class="logo-link">
                <img src="mini_logo_header.png" alt="Logo Vite & Gourmand" class="rounded-3 logo-img">
            </a>
        </div>
        
        <!-- Navigation Desktop -->
        <div class="header-filters flex-grow-1 justify-content-center align-items-center px-4 pt-3">
            <div class="filters-container d-flex flex-wrap justify-content-center align-items-end gap-2 gap-lg-3">
                <!-- Filtre personnes -->
                <div class="filter-group d-flex align-items-center">
                    <input type="number" class="form-control form-control-sm" id="filterPeople" placeholder="Nb pers." min="1" style="width: 70px; min-width: 70px;">
                    <label for="filterPeople" class="form-label ms-1 mb-0 small text-nowrap">min.</label>
                </div>

                <!-- Filtre régime -->
                <select class="form-select form-select-sm" id="filterRegime" style="width: auto; min-width: 100px;">
                    <option value="">Régime</option>
                    <option value="Classique">Classique</option>
                    <option value="Végétarien">Végétarien</option>
                    <option value="Vegan">Vegan</option>
                    <option value="Halal">Halal</option>
                </select>

                <!-- Filtre thème -->
                <select class="form-select form-select-sm" id="filterTheme" style="width: auto; min-width: 100px;">
                    <option value="">Thème</option>
                    <option value="Classique">Classique</option>
                    <option value="Noel">Noël</option>
                    <option value="Paques">Pâques</option>
                    <option value="Event">Événements</option>
                </select>

                <!-- Filtre prix -->
                <div class="filter-group d-flex align-items-center me-2">
                    <span class="small text-muted me-1">Prix:</span>
                    <input type="number" class="form-control form-control-sm" id="filterPriceMin" placeholder="Min" min="0" step="1" style="width: 60px;">
                    <span class="mx-1">-</span>
                    <input type="number" class="form-control form-control-sm" id="filterPriceMax" placeholder="Max" min="0" step="1" style="width: 60px;">
                    <span class="ms-1 small">€</span>
                </div>

                <!-- Filtre allergènes -->
                <select class="form-select form-select-sm" id="filterAllergenes" style="width: auto; min-width: 120px;">
                    <option value="">Sans allergène</option>
                    <option value="Gluten">Sans Gluten</option>
                    <option value="Lait et produits laitiers">Sans Lait</option>
                    <option value="Œufs">Sans Œufs</option>
                    <option value="Fruits à coque">Sans Fruits à coque</option>
                    <option value="Mollusques">Sans Mollusques</option>
                </select>

                <!-- Boutons d'action -->
                <div class="d-flex gap-2 ms-3">
                    <button class="btn btn-primary btn-sm" onclick="applyFilters()">
                        <i class="bi bi-funnel"></i> Filtrer
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" onclick="resetFilters()">
                        <i class="bi bi-arrow-clockwise"></i> Reset
                    </button>
                </div>

                <!-- Résultats -->
                <div class="filter-results ms-3 align-self-center">
                    <span class="text-muted small" id="filterResults">Affichage de tous les menus</span>
                </div>
            </div>
        </div>
        
        <!-- Actions Desktop (injecté dynamiquement par le Router) -->
        <div class="header-actions me-4 auth-actions">
            <!-- Rempli par updateAuthUI() -->
        </div>
    </div>
</div>

<!-- Menu mobile/tablette offcanvas -->
<div class="offcanvas offcanvas-start" tabindex="-1" id="mobileMenu" aria-labelledby="mobileMenuLabel">
    <div class="offcanvas-header border-bottom">
        <h5 class="offcanvas-title" id="mobileMenuLabel">Filtres & Menu</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Fermer"></button>
    </div>
    <div class="offcanvas-body p-0">
        <!-- Section Filtres -->
        <div class="mobile-menu-section border-bottom">
            <h6 class="mobile-menu-section-title px-3 py-3 mb-0 bg-light border-bottom">
                <i class="bi bi-funnel me-2"></i>Filtrer les menus
            </h6>
            <div class="mobile-menu-filters p-3">
                <!-- Filtre personnes -->
                <div class="filter-item mb-3">
                    <label class="form-label small fw-semibold">Nombre minimum de personnes</label>
                    <div class="d-flex align-items-center">
                        <input type="number" class="form-control" id="filterPeople" placeholder="Ex: 5" min="1">
                        <span class="ms-2 small text-muted">personnes</span>
                    </div>
                </div>

                <!-- Filtre régime -->
                <div class="filter-item mb-3">
                    <label class="form-label small fw-semibold">Régime alimentaire</label>
                    <select class="form-select" id="filterRegime">
                        <option value="">Tous les régimes</option>
                        <option value="Classique">Classique</option>
                        <option value="Végétarien">Végétarien</option>
                        <option value="Vegan">Vegan</option>
                        <option value="Halal">Halal</option>
                    </select>
                </div>

                <!-- Filtre thème -->
                <div class="filter-item mb-3">
                    <label class="form-label small fw-semibold">Thème du menu</label>
                    <select class="form-select" id="filterTheme">
                        <option value="">Tous les thèmes</option>
                        <option value="Classique">Classique</option>
                        <option value="Noel">Noël</option>
                        <option value="Paques">Pâques</option>
                        <option value="Event">Événements</option>
                    </select>
                </div>

                <!-- Filtre prix -->
                <div class="filter-item mb-3">
                    <label class="form-label small fw-semibold">Prix par personne</label>
                    <div class="row g-2">
                        <div class="col-6">
                            <input type="number" class="form-control" id="filterPriceMin" placeholder="Prix min" min="0" step="1">
                        </div>
                        <div class="col-6">
                            <input type="number" class="form-control" id="filterPriceMax" placeholder="Prix max" min="0" step="1">
                        </div>
                    </div>
                    <div class="form-text small">Laissez vide pour prix illimité</div>
                </div>

                <!-- Filtre allergènes -->
                <div class="filter-item mb-4">
                    <label class="form-label small fw-semibold">Exclure les allergènes</label>
                    <select class="form-select" id="filterAllergenes">
                        <option value="">Aucune exclusion</option>
                        <option value="Gluten">Sans Gluten</option>
                        <option value="Lait et produits laitiers">Sans Lait</option>
                        <option value="Œufs">Sans Œufs</option>
                        <option value="Fruits à coque">Sans Fruits à coque</option>
                        <option value="Mollusques">Sans Mollusques</option>
                    </select>
                </div>

                <!-- Boutons d'action -->
                <div class="d-grid gap-2">
                    <button class="btn btn-primary" onclick="applyFilters()">
                        <i class="bi bi-funnel me-2"></i>Appliquer les filtres
                    </button>
                    <button class="btn btn-outline-secondary" onclick="resetFilters()">
                        <i class="bi bi-arrow-clockwise me-2"></i>Réinitialiser
                    </button>
                </div>

                <!-- Résultats -->
                <div class="mt-3 p-2 bg-light rounded small text-center">
                    <div id="filterResults">Affichage de tous les menus</div>
                </div>
            </div>
        </div>

        <!-- Section Actions utilisateur -->
        <div class="mobile-menu-section">
            <h6 class="mobile-menu-section-title px-3 py-3 mb-0 bg-light border-bottom">
                <i class="bi bi-person-circle me-2"></i>Mon compte
            </h6>
            <div class="mobile-menu-actions p-3 auth-actions-mobile">
                <!-- Rempli par updateAuthUI() -->
            </div>
        </div>
    </div>
</div>

<!-- Offcanvas Profil utilisateur (côté droit) -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="userProfileMenu" aria-labelledby="userProfileMenuLabel">
    <div class="offcanvas-header border-bottom">
        <div class="d-flex align-items-center gap-2">
            <div class="text-primary fs-4">
                <i class="bi bi-person-circle"></i>
            </div>
            <div>
                <h5 class="offcanvas-title fw-semibold mb-0" id="userProfileMenuLabel">Mon Espace</h5>
                <small class="text-muted" id="offcanvas-user-email"></small>
            </div>
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Fermer"></button>
    </div>
    <div class="offcanvas-body p-0" id="offcanvas-nav-body">
        <!-- Contenu généré dynamiquement par Router.js selon le rôle -->
    </div>
</div>
